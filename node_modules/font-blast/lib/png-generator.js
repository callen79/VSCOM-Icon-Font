"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (sourceDir, targetDir, size) {
  if (!_fs2.default.existsSync(targetDir)) _mkdirp2.default.sync(targetDir);

  var batikFile = _path2.default.resolve(__dirname, "../batik/batik-rasterizer.jar");
  var params = ["-jar", batikFile, "-d", targetDir, "-maxh", size, sourceDir];

  // let cmd = null;
  // let params = [];

  // if (converterExec == "batik") {
  // cmd = 'java';

  // }
  //var converterParams = getRasterizerParams(converterExec, {
  //    toDir:     saveToDir,
  //    maxHeight: size,
  //    sourceDir: sourceDir
  //});

  (0, _child_process.exec)("java " + params.join(" "), function (err) {});
  // var coverter = spawn(cmd, params);
  // coverter.on('error', function (data) {
  //     //console.log(data.toString());
  // });
  //
  // coverter.stdout.on('data', function (data) {
  //     //console.log(data.toString());
  // });
  // coverter.stderr.on('data', function (data) {
  //     //console.log(data.toString());
  // });
};

var _path = require("path");

var _path2 = _interopRequireDefault(_path);

var _fs = require("fs");

var _fs2 = _interopRequireDefault(_fs);

var _mkdirp = require("mkdirp");

var _mkdirp2 = _interopRequireDefault(_mkdirp);

var _child_process = require("child_process");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

module.exports = exports["default"];

// var converterExec = "batik";
//Currently converts svg with apache batik
//Add handlers for more processors, like rsvg or GraphicsMagick

//Add an option to trim images on output
//through GM or IM
//gm mogrify -trim *
//Perhaps trim SVGs as well? no need, they can be imported into any SVG tool already

//add an option to optimize PNGs
//add an option to generate sprits from PNGs or SVGs

//
//function getRasterizerParams(resizerName, ops) {
//    var params = [];
//
//    if (resizerName == 'batik-rasterizer') {
//        params = ['-d', ops.toDir, '-maxh', ops.maxHeight, ops.sourceDir];
//    }
//
//    return params;
//}